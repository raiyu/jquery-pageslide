/*
 * jQuery pageSlide
 * Version 2.0
 * http://srobbin.com/jquery-pageslide/
 *
 * jQuery Javascript plugin which slides a webpage over to reveal an additional interaction pane.
 *
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
*/
;(function(e){function s(t,r){if(t.indexOf("#")===0){e(t).clone(true).appendTo(n.empty()).show()}else{if(r){var i=e("<iframe />").attr({src:t,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});n.html(i)}else{n.load(t)}n.data("localEl",false)}}function o(i,s){e("#opacity-fade").show();var o=n.outerWidth(true),u={},a={};if(n.is(":visible")||r)return;r=true;switch(i){case"left":n.css({left:"auto",right:"-"+o+"px"});a["right"]="+="+o;break;default:n.css({left:"-"+o+"px",right:"auto"});a["left"]="+="+o;break}t.animate(u,s);n.show().animate(a,s,function(){r=false});t.addClass("body-no-scroll")}var t,n;e(function(){t=e("body"),n=e("#pageslide");n.click(function(e){e.stopPropagation()});e(document).bind("click keyup",function(t){if(t.type=="keyup"&&t.keyCode!=27)return;if(n.is(":visible")&&!n.data("modal")){e.pageslide.close()}})});var r=false,i;e.fn.pageslide=function(t){var r=this;r.click(function(r){var s=e(this),o=e.extend({href:s.attr("href")},t);r.preventDefault();r.stopPropagation();if(n.is(":visible")&&s[0]==i){e.pageslide.close()}else{e.pageslide(o);i=s[0]}})};e.fn.pageslide.defaults={speed:200,direction:"right",modal:false,iframe:true,href:null};e.pageslide=function(t){var r=e.extend({},e.fn.pageslide.defaults,t);if(n.is(":visible")&&n.data("direction")!=r.direction){e.pageslide.close(function(){s(r.href,r.iframe);o(r.direction,r.speed)})}else{s(r.href,r.iframe);if(n.is(":hidden")){o(r.direction,r.speed)}}n.data(r)};e.pageslide.close=function(n){var i=e("#pageslide"),s=i.outerWidth(true),o=i.data("speed"),u={},a={};if(i.is(":hidden")||r)return;r=true;switch(i.data("direction")){case"left":a["right"]="-="+s;break;default:a["left"]="-="+s;break}i.animate(a,o,function(){i.hide();t.removeClass("body-no-scroll")});e("#opacity-fade").hide();r=false}})(jQuery);